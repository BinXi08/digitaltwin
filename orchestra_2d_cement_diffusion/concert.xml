<?xml version="1.0" encoding="UTF-8"?>
<Concert>
   <!--**** The nodes that are used in the system.-->
   <Nodes TypeFile="column.dat" NrNodes="500" />

   <Task Name="Read initial solid composition" Type="InstreamGroup">
      <File>initial_solid_composition.dat</File>
      <Nodes>(0-400)</Nodes>
   </Task>

    <Task Name="Equilibrate all nodes 1" Type="NodeGroup" Threads="1">
      <Calculator>chemistry1</Calculator>
      <Nodes>(0-400)</Nodes>
   </Task>

   <Task Name="Equilibrate all nodes 2" Type="NodeGroup" Threads="24">
      <Calculator>chemistry2</Calculator>
      <Nodes>(0-400)</Nodes>
   </Task>

   <Task Name="Update mass" Type="NodeGroup" Threads="1">
      <Calculator>update_mass</Calculator>
      <Nodes>(1-400)</Nodes>
   </Task>

   <Task Name="Evaluate integrity" Type="NodeGroup" Threads="1">
      <Calculator>evaluate_integrity</Calculator>
      <Nodes>(1-20)</Nodes>
   </Task>


   <Task Name="clock" Type="NodeGroup">
      <Calculator>clock</Calculator>
      <Nodes>(0)</Nodes>
   </Task>

   <Task Name="Calculate advection" Type="LinkGroup">
      <Calculator>advection</Calculator>
      <Links>(0-1,
1-2,2-3,3-4,4-5,5-6,6-7,7-8,8-9,9-10,10-11,
11-12,12-13,13-14,14-15,15-16,16-17,17-18,18-19,19-20,20-21,
21-22,22-23,23-24,24-25,25-26,26-27,27-28,28-29,29-30,30-31,
31-32,32-33,33-34,34-35,35-36,36-37,37-38,38-39,39-40,40-41,
41-42,42-43,43-44,44-45,45-46,46-47,47-48,48-49,49-50,50-51,
51-52,52-53,53-54,54-55,55-56,56-57,57-58,58-59,59-60,60-61,
61-62,62-63,63-64,64-65,65-66,66-67,67-68,68-69,69-70,70-71,
71-72,72-73,73-74,74-75,75-76,76-77,77-78,78-79,79-80,80-81,
81-82,82-83,83-84,84-85,85-86,86-87,87-88,88-89,89-90,90-91,
91-92,92-93,93-94,94-95,95-96,96-97,97-98,98-99,99-100
)</Links>
   </Task>


  <Task Name="Calculate gasdiffusion" Type="LinkGroup">
      <Calculator>gasdiffusion</Calculator>
      <Links>(

0-1,  0-2, 0-3, 0-4, 0-5, 0-6, 0-7, 0-8, 0-9, 0-10, 0-11, 0-12, 0-13, 0-14, 0-15, 0-16, 0-17, 0-18, 0-19, 0-20,
0-21, 0-41, 0-61, 0-81, 0-101, 0-121, 0-141, 0-161, 0-181, 0-201, 0-221, 0-241, 0-261, 0-281, 0-301, 0-321, 0-341, 0-361, 0-381

      )</Links>
   </Task>



  <Task Name="Calculate diffusion" Type="LinkGroup">
      <Calculator>diffusion</Calculator>
      <Links>(

//0-1,  0-2, 0-3, 0-4, 0-5, 0-6, 0-7, 0-8, 0-9, 0-10, 0-11, 0-12, 0-13, 0-14, 0-15, 0-16, 0-17, 0-18, 0-19, 0-20,
//0-21, 0-41, 0-61, 0-81, 0-101, 0-121, 0-141, 0-161, 0-181, 0-201, 0-221, 0-241, 0-261, 0-281, 0-301, 0-321, 0-341, 0-361, 0-381,

1-2,2-3,3-4,4-5,5-6,6-7,7-8,8-9,9-10,10-11,11-12,12-13,13-14,14-15,15-16,16-17,17-18,18-19,19-20,
21-22,22-23,23-24,24-25,25-26,26-27,27-28,28-29,29-30,30-31,31-32,32-33,33-34,34-35,35-36,36-37,37-38,38-39,39-40,
41-42,42-43,43-44,44-45,45-46,46-47,47-48,48-49,49-50,50-51,51-52,52-53,53-54,54-55,55-56,56-57,57-58,58-59,59-60,
61-62,62-63,63-64,64-65,65-66,66-67,67-68,68-69,69-70,70-71,71-72,72-73,73-74,74-75,75-76,76-77,77-78,78-79,79-80,
81-82,82-83,83-84,84-85,85-86,86-87,87-88,88-89,89-90,90-91,91-92,92-93,93-94,94-95,95-96,96-97,97-98,98-99,99-100,
101-102,102-103,103-104,104-105,105-106,106-107,107-108,108-109,109-110,110-111,111-112,112-113,113-114,114-115,115-116,116-117,117-118,118-119,119-120,
121-122,122-123,123-124,124-125,125-126,126-127,127-128,128-129,129-130,130-131,131-132,132-133,133-134,134-135,135-136,136-137,137-138,138-139,139-140,
141-142,142-143,143-144,144-145,145-146,146-147,147-148,148-149,149-150,150-151,151-152,152-153,153-154,154-155,155-156,156-157,157-158,158-159,159-160,
161-162,162-163,163-164,164-165,165-166,166-167,167-168,168-169,169-170,170-171,171-172,172-173,173-174,174-175,175-176,176-177,177-178,178-179,179-180,
181-182,182-183,183-184,184-185,185-186,186-187,187-188,188-189,189-190,190-191,191-192,192-193,193-194,194-195,195-196,196-197,197-198,198-199,199-200,
201-202,202-203,203-204,204-205,205-206,206-207,207-208,208-209,209-210,210-211,211-212,212-213,213-214,214-215,215-216,216-217,217-218,218-219,219-220,
221-222,222-223,223-224,224-225,225-226,226-227,227-228,228-229,229-230,230-231,231-232,232-233,233-234,234-235,235-236,236-237,237-238,238-239,239-240,
241-242,242-243,243-244,244-245,245-246,246-247,247-248,248-249,249-250,250-251,251-252,252-253,253-254,254-255,255-256,256-257,257-258,258-259,259-260,
261-262,262-263,263-264,264-265,265-266,266-267,267-268,268-269,269-270,270-271,271-272,272-273,273-274,274-275,275-276,276-277,277-278,278-279,279-280,
281-282,282-283,283-284,284-285,285-286,286-287,287-288,288-289,289-290,290-291,291-292,292-293,293-294,294-295,295-296,296-297,297-298,298-299,299-300,
301-302,302-303,303-304,304-305,305-306,306-307,307-308,308-309,309-310,310-311,311-312,312-313,313-314,314-315,315-316,316-317,317-318,318-319,319-320,
321-322,322-323,323-324,324-325,325-326,326-327,327-328,328-329,329-330,330-331,331-332,332-333,333-334,334-335,335-336,336-337,337-338,338-339,339-340,
341-342,342-343,343-344,344-345,345-346,346-347,347-348,348-349,349-350,350-351,351-352,352-353,353-354,354-355,355-356,356-357,357-358,358-359,359-360,
361-362,362-363,363-364,364-365,365-366,366-367,367-368,368-369,369-370,370-371,371-372,372-373,373-374,374-375,375-376,376-377,377-378,378-379,379-380,
381-382,382-383,383-384,384-385,385-386,386-387,387-388,388-389,389-390,390-391,391-392,392-393,393-394,394-395,395-396,396-397,397-398,398-399,399-400

1-21,21-41,41-61,61-81,81-101,101-121,121-141,141-161,161-181,181-201,201-221,221-241,241-261,261-281,281-301,301-321,321-341,341-361,361-381,
2-22,22-42,42-62,62-82,82-102,102-122,122-142,142-162,162-182,182-202,202-222,222-242,242-262,262-282,282-302,302-322,322-342,342-362,362-382,
3-23,23-43,43-63,63-83,83-103,103-123,123-143,143-163,163-183,183-203,203-223,223-243,243-263,263-283,283-303,303-323,323-343,343-363,363-383,
4-24,24-44,44-64,64-84,84-104,104-124,124-144,144-164,164-184,184-204,204-224,224-244,244-264,264-284,284-304,304-324,324-344,344-364,364-384,
5-25,25-45,45-65,65-85,85-105,105-125,125-145,145-165,165-185,185-205,205-225,225-245,245-265,265-285,285-305,305-325,325-345,345-365,365-385,
6-26,26-46,46-66,66-86,86-106,106-126,126-146,146-166,166-186,186-206,206-226,226-246,246-266,266-286,286-306,306-326,326-346,346-366,366-386,
7-27,27-47,47-67,67-87,87-107,107-127,127-147,147-167,167-187,187-207,207-227,227-247,247-267,267-287,287-307,307-327,327-347,347-367,367-387,
8-28,28-48,48-68,68-88,88-108,108-128,128-148,148-168,168-188,188-208,208-228,228-248,248-268,268-288,288-308,308-328,328-348,348-368,368-388,
9-29,29-49,49-69,69-89,89-109,109-129,129-149,149-169,169-189,189-209,209-229,229-249,249-269,269-289,289-309,309-329,329-349,349-369,369-389,
10-30,30-50,50-70,70-90,90-110,110-130,130-150,150-170,170-190,190-210,210-230,230-250,250-270,270-290,290-310,310-330,330-350,350-370,370-390,
11-31,31-51,51-71,71-91,91-111,111-131,131-151,151-171,171-191,191-211,211-231,231-251,251-271,271-291,291-311,311-331,331-351,351-371,371-391,
12-32,32-52,52-72,72-92,92-112,112-132,132-152,152-172,172-192,192-212,212-232,232-252,252-272,272-292,292-312,312-332,332-352,352-372,372-392,
13-33,33-53,53-73,73-93,93-113,113-133,133-153,153-173,173-193,193-213,213-233,233-253,253-273,273-293,293-313,313-333,333-353,353-373,373-393,
14-34,34-54,54-74,74-94,94-114,114-134,134-154,154-174,174-194,194-214,214-234,234-254,254-274,274-294,294-314,314-334,334-354,354-374,374-394,
15-35,35-55,55-75,75-95,95-115,115-135,135-155,155-175,175-195,195-215,215-235,235-255,255-275,275-295,295-315,315-335,335-355,355-375,375-395,
16-36,36-56,56-76,76-96,96-116,116-136,136-156,156-176,176-196,196-216,216-236,236-256,256-276,276-296,296-316,316-336,336-356,356-376,376-396,
17-37,37-57,57-77,77-97,97-117,117-137,137-157,157-177,177-197,197-217,217-237,237-257,257-277,277-297,297-317,317-337,337-357,357-377,377-397,
18-38,38-58,58-78,78-98,98-118,118-138,138-158,158-178,178-198,198-218,218-238,238-258,258-278,278-298,298-318,318-338,338-358,358-378,378-398,
19-39,39-59,59-79,79-99,99-119,119-139,139-159,159-179,179-199,199-219,219-239,239-259,259-279,279-299,299-319,319-339,339-359,359-379,379-399,
20-40,40-60,60-80,80-100,100-120,120-140,140-160,160-180,180-200,200-220,220-240,240-260,260-280,280-300,300-320,320-340,340-360,360-380,380-400


)</Links>
   </Task>



   <Task Name="Read feed node" Type="InstreamGroup">
      <File>feed.dat</File>
      <Nodes>(0)</Nodes>
   </Task>

   <Task Name="Write output_profile" Type="OutstreamGroup">
      <File>output_profile.dat</File>
      <Nodes>(0-400)</Nodes>
   </Task>

  // 
   <Task Name="Write integrity data" Type="OutstreamGroup">
      <File>integrity.dat</File>
      <Nodes>(0)</Nodes>
   </Task>
  

   <Task Name="View" Type="Viewer_2d" XDim="20" YDim="20">
      <File>diag.inp</File>
      <Frequency>1000</Frequency>
      // we show first cell multiple times to make it better visible in the graphs
      <Nodes>(1-400)</Nodes>
   </Task>

   <Task Name="Initialization" Type="TaskGroup">
      <DoTask Name="Read initial solid composition" />
      <DoTask Name="Equilibrate all nodes 1" />
   </Task>


   <Task Name="Clock_update" Type="TaskGroup">
      <DoTask Name="clock" />
      <DoTask Name="Update mass" />
   </Task>


   <Task Name="Each Timestep" Type="RepeatingTaskGroup">
      <DoTask Name="Read feed node" />
      <DoTask Name="Equilibrate all nodes 2" />
      <DoTask Name="Evaluate integrity" />

      <DoTask Name="Write output_profile"/>
      <DoTask Name="Write integrity data"/>

 //     <DoTask Name="Calculate advection" /> 
      <DoTask Name="Calculate gasdiffusion" />
      <DoTask Name="Calculate diffusion" />
      <DoTask Name="Clock_update" />
//      <DoTask Name="View" />
   </Task>


   <Task Name="Run" Type="TaskGroup">
      <DoTask Name="Initialization" />
      <DoTask Name="Write output_profile"/>
      <DoTask Name="Each Timestep" />
   </Task>
</Concert>
